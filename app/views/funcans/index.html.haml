.page-header
  #main-tweet-box
    = form_tag :funcans do
      = label_tag :text do
        今日楽しめたこと・できたことは？
      .text-area
        = text_area_tag :text, nil, class: 'xxlarge', required: true
      .button-container
        = button_tag class: 'btn fun', name: 'kind', value: 'fun' do
          FUN
        = button_tag class: 'btn can', name: 'kind', value: 'can' do
          CAN
        = button_tag class: 'btn funcan success', name: 'kind', value: 'funcan' do
          FUN & CAN
  %ul.tabs
    %li.active= link_to 'みんなのFUNCAN', '#'
    %li= link_to 'わたしのFUNCAN', '#'
%article
  - @tweets.each do |tweet|
    - tweet.text.gsub!(/\s+#\w+(?=\s|\Z)/, '')
    - kinds = tweet.entities.hashtags.map {|h| h.text.downcase } & ['fun', 'can']
    - kinds = ['fun', 'can'] if kinds.blank?
    .funcan.stream-item
      .tweet{class: kinds}
        .tweet-image
          = image_tag tweet.user.profile_image_url
        .tweet-content
          .tweet-row
            %span.tweet-user-name
              = tweet.user.name
          .tweet-row
            .tweet-text
              = tweet.text
              - kinds.each do |k|
                %span.label{class: k}= k.upcase
          %time.tweet-row
            = link_to l(Time.parse(tweet.created_at)), "http://twitter.com/#{tweet.user.screen_name}/status/#{tweet.id_str}", class: 'tweet-timestamp'
      .comment-container
        - Comment.types.each do |type|
          -#= form_tag comments_path(tweet.id_str, type), remote: true, method: :put, 'data-update-id' => "funcan_#{tweet.id_str}_comments", 'data-type' => 'html' do
          = form_tag comments_path(tweet.id_str, type), method: :put, 'data-update-id' => "funcan_#{tweet.id_str}_comments", do
            = button_tag name: 'type', value: type, class: 'btn info small' do
              = t type, scope: 'activerecord.model'
            %span.label.notice.count= tweet.count(type)
-#%p= @tweets.inspect
